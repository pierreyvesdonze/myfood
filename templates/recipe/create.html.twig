{% extends "base.html.twig" %}

{% block body %}
{% form_theme form 'bootstrap_4_layout.html.twig' %}

<main class="main-create-recipe">
	<div class="progress">
		<div class="background-progress-bar">

		</div>
		<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0"
			aria-valuemax="100">
		</div>

	</div>
	<div class="main-add-recipe-container">

		{# MAIN TITLE #}
		{% if app.request.get('_route') matches '/recipe_add/' %}
		{% set mainTitle = "Ajouter une recette" %}
		{% else %}
		{% set mainTitle = "Modifier la recette" %}
		{% endif %}

		<div class="main-title">
			<h4>{{ mainTitle }}</h4>
		</div>

		{{ form_start(form, {'attr': {'id': 'msform'}}) }}

		<br>

		<!-- fieldsets -->

		{# Title #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">1 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">
				<label class="fieldlabels">{{ form_row(form.name) }}</label>
			</div>

		</fieldset>

		{# Description #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">2 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">
				{{ form_row(form.description) }}
			</div>

		</fieldset>

		{# Steps #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">3 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<br>
			<div class="form-card">
				<div class="row-steps">
					<div class="steps-container">
						<ul class="steps"
							data-prototype="{{ form_widget(form.recipeSteps.vars.prototype)|e('html_attr') }}">
							{# iterate over each existing step and render its only field: name #}
							{% for key, step in form.recipeSteps %}
							<li class="li-step">
								{{ form_row(step.text) }}
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</fieldset>

		{# Ingredients #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">4 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">

				<div class="row-ingredients">
					<div class="steps-container">
						<ul class="ingredients"
							data-prototype="{{ form_widget(form.recipeIngredients.vars.prototype)|e('html_attr') }}">

							{# iterate over each existing step and render its only field: name #}
							{% for ingredient in form.recipeIngredients %}
							<li class="li-ingredient">
								{{ form_row(ingredient.name) }}

								{{ form_row(ingredient.amount, {'type':'number', 'lang': app.request.locale}) }}

								{{ form_row(ingredient.unit) }}
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</fieldset>

		{# Menu #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">5 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">


				<div class="recipe-add-container">
					<div class="recipe-menu">
						<span>
							Choisissez parmi la liste ci-dessous un type de plat
						</span>
						{{ form_row(form.recipeMenu) }}
					</div>
				</div>

			</div>
		</fieldset>

		{# Category #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">6 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">


				<div class="recipe-add-container">
					<div class="recipe-category">
						<span>
							Choisissez parmi la liste ci-dessous une catégorie
						</span>
						{{ form_row(form.recipeCategory) }}
					</div>
					<div class="recipe-category-selected"></div>
				</div>

			</div>
		</fieldset>

		{# How Many Guests #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">7 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">

				<div class="row-step">
					<div class="recipe-add-container">
						<div class="recipe-guests">
							<div class="recipe-guest-range">
								{{ form_row(form.person) }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</fieldset>

		{# Times #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">8 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">


				<div class="time-form-container">
					<div class="left">
						<label for="">Temps de préparation (H : Min)</label>
						{{ form_widget(form.timePrepa) }}
					</div>
					<div class="right">
						<label for="">Temps de cuisson (H : Min)</label>
						{{ form_widget(form.timeCook) }}
					</div>

				</div>
			</div>
		</fieldset>

		{# Images #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">9 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">
				<div class="row">
				</div>
				<div class="row-step">
					<div class="recipe-create-images">
						<div class="custom-input">
							{{ form_row(form.recipePhoto) }}
						</div>
					</div>
				</div>
			</div>
		</fieldset>

		{# Tags #}
		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">Étape 10 - 10</h2>
			</div>
			<a type="button" name="next" class="next action-button" value="">
				<i class="fas fa-arrow-right fa-2x"></i>
			</a>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="form-card">
				<div class="row-step">
					<div class="recipe-tags">
						{{ form_row(form.tags,  {label_attr: {id: 'checkbox-custom'} }) }}
					</div>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<div class="col-12">
				<h2 class="steps-title">Fin</h2>
			</div>
			<a type="button" name="previous" class="previous action-button-previous" value="">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<br><br>
			<div class="row-step">
				<div class="col-12">
					<h2>Valider le formulaire ?</h2>
				</div>
			</div>
			{{ form_widget(form.save) }}
			<br><br>
		</fieldset>

		{{ form_end(form) }}
	</div>
</main>
{% endblock %}