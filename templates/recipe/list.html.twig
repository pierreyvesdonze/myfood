{% extends "base.html.twig" %}

{% block body %}

<section class="recipies-container">

    {% for recipe in recipies %}
    <div class="recipe">
        <a href="{{ path('recipe_view', {'id': recipe.id}) }}">

            <div class="container-img">
                {% if recipe.recipePhoto %}
                <img src="{{ asset('uploads/' ~ recipe.recipePhoto) }}" alt="recipe-img" class="recipe-img">
                {% else %}
                <img src="{{ asset('assets/images/embossed-diamond.png') }}" alt="recipe-img" class="recipe-img">
                {% endif %}
            </div>
        </a>

        <div class="container-footer">

            <div class="container-title">
                <a href="{{ path('recipe_view', {'id': recipe.id}) }}">
                <h3>{{ recipe.name }}</h3>
                </a>
            </div>

            <hr class="hr">

            <div class="container-summary">

                <span>
                    <i class="fa fa-user"></i>
                    {{ recipe.person }}

                    {% if recipe.person > 1 %}
                    personnes
                    {% else %}
                    personne
                    {% endif %}
                </span>

                <br>

                <i class="fas fa-clock"></i>
                PrÃ©paration :
                {% if recipe.timePrepa %}
                {% if hoursPrepa > 0 %}
                {{ hoursPrepa }} h
                {% endif %}
                {% if minutesPrepa > 0 %}
                {{ minutesPrepa }} min
                {% endif %}
                {% else %}
                -
                {% endif %}

                <br>

                <i class="fas fa-clock"></i>
                Cuisson :
                {% if recipe.timeCook %}
                {% if hoursCook > 0 %}
                {{ hoursCook }} h
                {% endif %}
                {% if minutesCook > 0 %}
                {{ minutesCook }} min
                {% endif %}
                {% else %}
                -
                {% endif %}
            </div>

            <hr class="hr">

            <div class="control">

                {% if is_granted('edit', recipe) %}
                <a href="{{ path('recipe_update',{'id': recipe.id}) }}" class="button">
                    <i class="fa fa-edit fa-2x"></i>
                </a>
                {% endif %}

                <a href="{{ path('shopping_list_create',{'id': recipe.id}) }}" class="button">
                    <i class="fa fa-cart-plus fa-2x"></i>
                </a>
                <a href="{{ path('shopping_list_add',{'id': recipe.id}) }}" class="button">
                    <i class="fa fa-cart-arrow-down fa-2x"></i>
                </a>
                {% if is_granted('edit', recipe) %}
                <a href="{{ path('recipe_delete',{'id': recipe.id}) }}" class="button">
                    <i class="fa fa-trash fa-2x"></i>
                </a>
                {% endif %}
            </div>
        </div>
    </div>

    {% endfor %}

</section>

{% endblock %}